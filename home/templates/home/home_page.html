{% extends "base.html" %} {% load static wagtailimages_tags wagtailcore_tags %}
{% block body_class %}template-homepage{% endblock %} {% block extra_css %} 
{% endblock extra_css %} {% block content %}

<!--Title and image-->
{% for block in page.header_block %} {% include_block block %} {% endfor %}

<!--Navbar-->
<nav class="navbar navbar-dark bg-dark navbar-expand-lg sticky-top">
  <div class="container px-4">
    <!-- Changed from container-fluid to container -->
    <a class="navbar-brand" href="#">Jon Berger√∏y Ryssdal</a>
    <button
      class="navbar-toggler"
      type="button"
      data-bs-toggle="collapse"
      data-bs-target="#navbarNav"
      aria-controls="navbarNav"
      aria-expanded="false"
      aria-label="Toggle navigation"
    >
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse justify-content-end" id="navbarNav">
      <ul class="navbar-nav">
        <li class="nav-item">
          <a class="nav-link active" aria-current="page" href="#about">About</a>
        </li>
        <li class="nav-item">
          <a class="nav-link active" href="#languages"
            >Languages and frameworks</a
          >
        </li>
        <li class="nav-item">
          <a class="nav-link active" href="#projects">Projects</a>
        </li>
        <li class="nav-item">
          <a class="nav-link active" href="#contact"
            >Connect & My Background</a
          >
        </li>
      </ul>
    </div>
  </div>
</nav>

<!--About-->
<div id="about" class="container p-4 border-bottom">
  <div class="row">
    <div class="col">
      <h2 class="text-center pt-5">About</h2>
    </div>
  </div>
  {% for block in page.about_block %} {% include_block block %} {% endfor %}
</div>

<!--Languages and frameworks-->
<div id="languages" class="container p-4 border-bottom">
  <div class="row mb-4">
    <div class="col">
      <h2 class="text-center pt-5">My languages and frameworks</h2>
    </div>
  </div>
  <div class="row">
    <div class="col">
      <p class="text-center fw-bold">
        I have experience with the following programs and frameworks:
      </p>
    </div>
  </div>
  <div class="row justify-content-evenly">
    {% for block in page.languages_frameworks %}
    <div class="col-3 col-md-2 col-lg-1">
      {% image block.value.logo fill-100x100 as img %}
      <img src="{{ img.url }}" alt="{{ img.alt }}" class="img-fluid" />
    </div>
    {% endfor %}
  </div>
</div>

<!-- Inline CSS for cards and buttons -->
<style>
  .card,
  button {
    border-radius: 4px;
    background: #fff;
    box-shadow: 0 6px 10px rgba(0, 0, 0, 0.08), 0 0 6px rgba(0, 0, 0, 0.05);
    transition: 0.3s transform cubic-bezier(0.155, 1.105, 0.295, 1.12),
      0.3s box-shadow,
      0.3s -webkit-transform cubic-bezier(0.155, 1.105, 0.295, 1.12);
    cursor: pointer;
  }

  #card-btn:hover,
  .card:hover,
  button:hover {
    transform: scale(1.05);
    box-shadow: 0 10px 20px rgba(0, 0, 0, 0.12), 0 4px 8px rgba(0, 0, 0, 0.06);
  }

  #card-btn {
    border-radius: 4px;
    box-shadow: 0 6px 10px rgba(0, 0, 0, 0.08), 0 0 6px rgba(0, 0, 0, 0.05);
    transition: 0.3s transform cubic-bezier(0.155, 1.105, 0.295, 1.12),
      0.3s box-shadow,
      0.3s -webkit-transform cubic-bezier(0.155, 1.105, 0.295, 1.12);
    cursor: pointer;
  }
</style>

<!-- Projects -->
<div id="projects" class="container p-4 border-bottom">
  <div class="row mb-4">
    <div class="col">
      <h2 class="text-center pt-5">Featured Projects</h2>
    </div>
  </div>
  <div class="row">
    <!-- Wagtail-rendered projects (if any) -->
    {% for block in page.project %}
    <div class="col-12 col-md-6 col-lg-4 mb-4">{{ block }}</div>
    {% endfor %}
  </div>

  <!-- Button to toggle GitHub repositories -->
  <div class="row justify-content-center mt-4">
    <div class="col-12 text-center">
      <button
        class="btn btn-dark"
        type="button"
        data-bs-toggle="collapse"
        data-bs-target="#githubReposCollapse"
        aria-expanded="false"
        aria-controls="githubReposCollapse"
      >
        Show GitHub Repositories
      </button>
    </div>
  </div>

  <!-- Collapsible GitHub repositories section -->
<div class="row justify-content-center mt-3">
  <div class="col-12">
    <div class="collapse" id="githubReposCollapse">
      <ul id="github-repos-list" class="list-unstyled text-center">
        <!-- List of repositories will be injected here -->
      </ul>
    </div>
  </div>
</div>

<script>
  const username = "jonbergeroeyryssdal"; // Your GitHub username
  const githubReposList = document.getElementById("github-repos-list");

  async function fetchGitHubRepos() {
    try {
      const response = await fetch(
        `https://api.github.com/users/${username}/repos`
      );
      const repos = await response.json();
      displayRepos(repos);
    } catch (error) {
      console.error("Error fetching GitHub repositories:", error);
      githubReposList.innerHTML = `<li class="text-center">Unable to load repositories.</li>`;
    }
  }

  function displayRepos(repos) {
    if (repos.length === 0) {
      githubReposList.innerHTML = `<li class="text-center">No GitHub repositories found.</li>`;
      return;
    }

    repos.forEach((repo) => {
      const repoItem = `
        <li>
          <a href="${repo.html_url}" target="_blank" class="repo-link">
            ${repo.name} - ${repo.description || "No description available."}
          </a>
        </li>
      `;
      githubReposList.innerHTML += repoItem;
    });
  }

  // Fetch and display repositories when the page loads
  fetchGitHubRepos();
</script>


<style>
 .repo-link {
  color: black; /* Make the link black */
  text-decoration: none; /* Remove the underline by default */
}

.repo-link:hover {
  text-decoration: underline; /* Underline on hover */
  color: black; /* Keep the link black on hover */
}
#github-repos-list li {
  margin-bottom: 1rem; /* Adjust the value as needed */
}

</style>
</div>


<!--Contact, education and work history-->
<div id="contact" class="container p-4">
  <div class="row">
    <h2 class="text-center pt-5">Connect & My Background</h2>
  </div>

  {% for block in page.social %} {{ block }} {% endfor %}
</div>

<!--Footer-->
<footer class="bg-dark p-4">
  <div class="container">
    <div class="row">
      {% for block in page.footer_info %} {{ block }} {% endfor %}
    </div>
  </div>
</footer>

<script
  src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
  integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
  crossorigin="anonymous"
></script>

{% endblock content %}
